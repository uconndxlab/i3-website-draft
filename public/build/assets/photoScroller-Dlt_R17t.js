var f=(c,t)=>()=>(t||c((t={exports:{}}).exports,t),t.exports);var w=f((x,p)=>{class m{constructor(t={}){this.selector=t.selector||".photo-scroller",this.rows=t.rows||3,this.direction=t.direction||0,this.speed=t.speed||50,this.gap=t.gap||20,this.rowGap=t.rowGap||10,this.autoStart=t.autoStart!==!1,this.maxImageWidth=t.maxImageWidth||300,this.aspectRatio=t.aspectRatio||null,this.imageClass=t.imageClass||"photo-scroller-image",this.wrapperClass=t.wrapperClass||"photo-scroller-wrapper",this.reverseDirection=t.reverseDirection||!1,this.objectFit=t.objectFit||"cover",this.enforceHeight=t.enforceHeight!==!1,this.extendRows=t.extendRows||!1,this.rowExtension=t.rowExtension||100,this.imageRotationThreshold=45,this.imageRotation=0,this.container=null,this.images=[],this.rowElements=[],this.animations=[],this.init()}init(){if(this.container=document.querySelector(this.selector),!this.container){console.error(`PhotoScroller: Container with selector "${this.selector}" not found`);return}if(this.images=Array.from(this.container.querySelectorAll("img")),this.images.length===0){console.warn("PhotoScroller: No images found in container");return}this.setupContainer(),this.organizeIntoRows(),this.autoStart&&this.start()}setupContainer(){const t={position:"relative",height:"400px",transform:`rotate(${this.direction}deg)`};this.extendRows&&(t.left=`-${this.rowExtension}px`,t.width=`calc(100% + ${this.rowExtension*2}px)`,t.paddingLeft=`${this.rowExtension}px`,t.paddingRight=`${this.rowExtension}px`),gsap.set(this.container,t),this.imageRotation=this.calculateImageRotation()}organizeIntoRows(){this.rowElements.forEach(e=>e.remove()),this.rowElements=[];const t=Math.ceil(this.images.length/this.rows);for(let e=0;e<this.rows;e++){const i=this.createRow(e),s=e*t,o=Math.min(s+t,this.images.length),r=[];for(let a=s;a<o;a++)this.images[a]&&r.push(this.images[a]);for(let a=0;a<3;a++)r.forEach(l=>{const h=l.cloneNode(!0);h.className=this.imageClass;const n=document.createElement("div");n.className=this.wrapperClass,n.appendChild(h),this.styleImageWrapper(n),i.appendChild(n)});this.container.appendChild(i),this.rowElements.push(i)}this.images.forEach(e=>{gsap.set(e,{position:"absolute",visibility:"hidden",pointerEvents:"none"})})}createRow(t){const e=document.createElement("div");e.className=`photo-scroller-row row-${t}`;const o=(100-(this.rows-1)*this.rowGap/4)/this.rows,a={position:"absolute",top:`${t*(o+this.rowGap/4)}%`,height:`${o}%`,left:0,width:"100%",display:"flex",alignItems:"center",gap:`${this.gap}px`,whiteSpace:"nowrap",zIndex:10+t,marginBottom:t<this.rows-1?`${this.rowGap}px`:"0"};return gsap.set(e,a),e}styleImageWrapper(t){const e=t.querySelector("img"),i=this.container.offsetHeight/this.rows;let s,o;if(this.aspectRatio){let n=this.aspectRatio;Math.abs(this.imageRotation)===90&&(n=1/this.aspectRatio);const g=i*n;s=Math.min(g,this.maxImageWidth),this.enforceHeight?o=s/n:o="auto"}else{const n=e.naturalWidth/e.naturalHeight;e.naturalWidth>this.maxImageWidth?(s=this.maxImageWidth,o=this.enforceHeight?this.maxImageWidth/n:"auto"):(s=e.naturalWidth,o=this.enforceHeight?e.naturalHeight:"auto"),this.enforceHeight&&typeof o=="number"&&o>i&&(o=i,s=i*n)}let r=s,a;this.enforceHeight&&typeof o=="number"?(a=o,Math.abs(this.imageRotation)===90&&(r=o,a=s)):(a="auto",Math.abs(this.imageRotation)===90&&(r="auto"));const l={width:typeof r=="number"?`${r}px`:r,height:typeof a=="number"?`${a}px`:a,flexShrink:0,display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",overflow:"visible"},h={width:typeof s=="number"?`${s}px`:s,height:typeof o=="number"?`${o}px`:o,objectFit:this.objectFit,display:"block",transform:`rotate(${this.imageRotation}deg)`,transformOrigin:"center center"};gsap.set(t,l),gsap.set(e,h)}styleImage(t){const e=this.container.offsetHeight/this.rows;let i,s;if(this.aspectRatio){let r=this.aspectRatio;Math.abs(this.imageRotation)===90&&(r=1/this.aspectRatio);const a=e*r;i=Math.min(a,this.maxImageWidth),this.enforceHeight?s=i/r:s="auto"}else{const r=t.naturalWidth/t.naturalHeight;t.naturalWidth>this.maxImageWidth?(i=this.maxImageWidth,s=this.enforceHeight?this.maxImageWidth/r:"auto"):(i=t.naturalWidth,s=this.enforceHeight?t.naturalHeight:"auto"),this.enforceHeight&&typeof s=="number"&&s>e&&(s=e,i=e*r)}const o={width:typeof i=="number"?`${i}px`:i,height:typeof s=="number"?`${s}px`:s,objectFit:this.objectFit,flexShrink:0,display:"inline-block",transform:`rotate(${this.imageRotation}deg)`,transformOrigin:"center center"};gsap.set(t,o)}calculateImageRotation(){const t=Math.abs(this.direction%360);if((t>180?360-t:t)>this.imageRotationThreshold){if(this.direction>this.imageRotationThreshold)return-90;if(this.direction<-this.imageRotationThreshold)return 90}return 0}start(){this.stop(),this.rowElements.forEach((t,e)=>{let i=e%2===0?1:-1;this.reverseDirection&&(i*=-1);const s=t.querySelectorAll(`.${this.wrapperClass}`),o=Array.from(s).slice(0,s.length/3).reduce((n,g)=>n+g.offsetWidth+this.gap,0),r=-o;gsap.set(t,{x:r});const l=o/this.speed,h=gsap.to(t,{x:i===1?-o*2:0,duration:l,ease:"none",repeat:-1,repeatDelay:0});this.animations.push(h)})}stop(){this.animations.forEach(t=>t.kill()),this.animations=[]}pause(){this.animations.forEach(t=>t.pause())}resume(){this.animations.forEach(t=>t.resume())}calculateRowWidth(t){const e=t.querySelectorAll("img");let i=0;return e.forEach((s,o)=>{i+=s.offsetWidth,o<e.length-1&&(i+=this.gap)}),i}setSpeed(t){this.speed=t,this.animations.length>0&&this.start()}setReverseDirection(t){this.reverseDirection=t,this.animations.length>0&&this.start()}toggleScrollDirection(){this.reverseDirection=!this.reverseDirection,this.animations.length>0&&this.start()}setDirection(t){this.direction=t;const e=this.calculateImageRotation();gsap.set(this.container,{transform:`rotate(${this.direction}deg)`}),e!==this.imageRotation&&(this.imageRotation=e,this.rowElements.forEach(i=>{i.querySelectorAll(`.${this.wrapperClass}`).forEach(o=>{this.styleImageWrapper(o)})}))}setObjectFit(t){this.objectFit=t,this.rowElements.forEach(e=>{e.querySelectorAll(`.${this.wrapperClass}`).forEach(s=>{this.styleImageWrapper(s)})})}setEnforceHeight(t){this.enforceHeight=t,this.rowElements.forEach(e=>{e.querySelectorAll(`.${this.wrapperClass}`).forEach(s=>{this.styleImageWrapper(s)})})}setExtendRows(t,e=null){this.extendRows=t,e!==null&&(this.rowExtension=e);const i={transform:`rotate(${this.direction}deg)`};this.extendRows?(i.left=`-${this.rowExtension}px`,i.width=`calc(100% + ${this.rowExtension*2}px)`,i.paddingLeft=`${this.rowExtension}px`,i.paddingRight=`${this.rowExtension}px`):(i.left="0px",i.width="100%",i.paddingLeft="0px",i.paddingRight="0px"),gsap.set(this.container,i)}destroy(){this.stop(),this.images.forEach(t=>{gsap.set(t,{position:"",visibility:"visible",pointerEvents:"auto"})}),this.rowElements.forEach(t=>t.remove()),this.rowElements=[],gsap.set(this.container,{position:"",overflow:"",transform:""})}}function d(c){return new m(c)}typeof p<"u"&&p.exports&&(p.exports=m);window.PhotoScroller=m;window.createPhotoScroller=d});export default w();
